<div class="chat-container">
    <h2>Direct Message with {{ recipient }}</h2>
    
    <div class="messages-container">
      <div *ngFor="let message of receivedMessages"
           [ngClass]="{'message-right': message.sender === username, 'message-left': message.sender !== username}"
           class="message-item">
        <div class="message-content">
          <div class="sender-name">{{ message.sender }}</div>
          <div class="message-text" *ngIf="message.content">{{ message.content }}</div>
          <div class="message-image" *ngIf="message.attachment">
            <img [src]="message.attachment" alt="Shared image" />
          </div>
        </div>
      </div>
    </div>
  
    <div class="input-container">
      <input [(ngModel)]="messageContent" placeholder="Type a message..." (keyup.enter)="sendMessage()" />
  
      <div class="upload-container">
        <label for="imageUpload" class="upload-button">
          <span class="upload-icon">📎</span>
        </label>
        <input type="file" id="imageUpload" accept="image/*" (change)="onImageSelected($event)" />
        <div *ngIf="selectedImage" class="selected-image-name">
          {{ getImageName() }}
          <button class="remove-image" (click)="removeSelectedImage()">✕</button>
        </div>
      </div>
  
      <button (click)="sendMessage()" [disabled]="!messageContent && !selectedImage">Send</button>
    </div>
  </div>
  