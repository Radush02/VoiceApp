<mat-card class="profile-popup">
  <mat-card-header>
    <div mat-card-avatar class="avatar">
      <ng-container *ngIf="user.imageLink;" >
        <img [src]="user.imageLink" alt="{{ user.username }}'s avatar" />
      </ng-container>
      <ng-container *ngIf="!user.imageLink">
        <ng-template #letterIcon>
          <div class="default-icon">{{ user.username.charAt(0) }}</div>
        </ng-template>
      </ng-container>
      <input
        type="file"
        #fileInput
        accept="image/*"
        (change)="onImageSelected($event)"
      />
      <button
      mat-icon-button
      matTooltip="Change profile picture"
      (click)="changeProfilePicture()"
    >
      <mat-icon>camera_alt</mat-icon>
    </button>
    </div>
    <mat-card-title>{{ user.username }}</mat-card-title>
    <mat-card-subtitle>{{ user.status }}</mat-card-subtitle>
    <ng-container *ngIf="isSelf()">
      
    </ng-container>
  </mat-card-header>

  <mat-card-content>
    <p><strong>About me:</strong></p>
    <p>{{ user.aboutMe || 'No information provided.' }}</p>

    <ng-container *ngIf="isSelf()">
      <p><strong>Channels:</strong> {{ channelsCount }}</p>
      <p><strong>Friend requests pending:</strong> {{ requestsCount }}</p>
    </ng-container>

    <ng-container *ngIf="!isSelf()">
      <p><strong>Friends in common:</strong>
        <ng-container *ngIf="user.friends.length; else none">
          {{ user.friends.join(', ') }}
        </ng-container>
        <ng-template #none>None</ng-template>
      </p>
      </ng-container> 
  </mat-card-content>
<div *ngIf="isSelf() && requestsCount !== null" class="pending-requests">
  <h3>Pending Friend Requests ({{ requestsCount }})</h3>
  <div *ngFor="let request of pendingRequests" class="request-item">
    <span>{{ request }}</span>
<button mat-button color="primary" (click)="processRequest(request, RequestResponse.ACCEPTED)">Accept</button>
<button mat-button color="warn" (click)="processRequest(request, RequestResponse.REJECTED)">Reject</button>
  </div>
</div>
  <mat-card-actions align="end">
    <button mat-button (click)="close()">Close</button>
  </mat-card-actions>
</mat-card>